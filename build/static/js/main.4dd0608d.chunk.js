(this.webpackJsonpgefco=this.webpackJsonpgefco||[]).push([[0],{178:function(e,t){},232:function(e,t,n){},234:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n(22),o=n.n(c),i=n(6),s=n(100),l=n(5),d=n(32),u=n(14),j=n(125),b=n(15),m=n(65),f=n.n(m),O="http://localhost:8180",h=["branches","cities","departments","divisions"],p=["branch","city","department","division"],x=["TPK","OS","PP","PL"],g=function(){var e=new Date,t=e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()+" "+(e.getHours()+":"+e.getMinutes());return console.log("timestamp",t),t},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{dataField:""+e,text:t,sort:!0,headerStyle:{width:"1%"}}},y=function(e){return Object.keys(e).includes("link")||Object.keys(e).includes("document_id")?"document":"training"},S=function(e){return e.require_superior},w=function(e){return e.signatures.length>1?e.signatures[0].superior_id===V().id||e.signatures[1].superior_id===V().id:e.signatures[0].superior_id===V().id},k=function(e){return e.map((function(e){if(!S(e)||!w(e))return e.id}))},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return[{dataField:e,order:t}]},E=function(e){return{variant:"success",body:e}},C=function(e){return{variant:"danger",body:e}},T=function(e){return 200<=e.status&&e.status<=299},_=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("option",{hidden:!0,value:"",children:"Select option ..."}),e.map((function(e){return Object(a.jsx)("option",{value:e,children:e},f()())}))]})},D=function(e){var t,n,a,r;return{branches:null===(t=e.branches)||void 0===t?void 0:t.map((function(e){return{value:e.id,label:e.name}})),divisions:null===(n=e.divisions)||void 0===n?void 0:n.map((function(e){return{value:e.id,label:e.name}})),departments:null===(a=e.departments)||void 0===a?void 0:a.map((function(e){return{value:e.id,label:e.name}})),cities:null===(r=e.cities)||void 0===r?void 0:r.map((function(e){return{value:e.id,label:e.name}}))}},N=function(e){return{branch:e.branches.map((function(e){return e.value})).join(","),city:e.cities.map((function(e){return e.value})).join(","),department:e.departments.map((function(e){return e.value})).join(","),division:e.divisions.map((function(e){return e.value})).join(",")}};function R(e,t){if(!e.id)return"_";if(e.cancel)return"-";var n=e.e_date.Valid?"":"e";return t&&!e.s_date.Valid&&(n+="s"),n}var M=function(e,t,n){return e?e.assigned_to.split("&").map((function(e){var a=e.split("#"),r=Object(i.a)(a,3),c=r[0],o=r[1],s=(r[2],c.split("; ")),l={id:f()()};return h.forEach((function(e,n){(l[e]=[],"x"!==s[n])&&s[n].split(",").forEach((function(n){l[e].push({value:n,label:P(e,n,t)})}))})),l.removedEmployees=[],o?(o.split(",").forEach((function(e){l.removedEmployees.push({value:e,label:L(e,n,t.departments)})})),l):l})):[]},P=function(e,t,n){var a,r;return n&&(null===(a=n[e])||void 0===a||null===(r=a.find((function(e){return e.id==t})))||void 0===r?void 0:r.name)||"unknown"},L=function(e,t,n){if(!t)return"unknown";var a=t.find((function(t){return t.id.toString()===e}));return a?q(a,n):"unknown"},z=function(e){return{Time:e+"T00:00:00Z",Valid:!0}},A=function(e){return e.Time.substr(0,10)},I=function(e){var t=e.map((function(e){var t=h.map((function(t){var n=e[t];return console.log("values",n),n.length?n.map((function(e){return e.value})).join(","):"x"})).join("; "),n=e.removedEmployees.map((function(e){return e.value})).join(",");return"".concat(t,"#").concat(n,"#")}));return console.log(t),t.join("&")},B=function(e){return e.sort((function(e,t){return e.last_name<t.last_name?-1:e.last_name>t.last_name?1:0}))},q=function(e,t){var n,a=e.id,r=e.first_name,c=e.last_name,o=e.department_id,i=null===(n=t.find((function(e){return e.id===o})))||void 0===n?void 0:n.name;return"".concat(r," ").concat(c," [").concat(a,", ").concat(i,"]")},H=function(e,t){if(!e.length)return[];function n(e,t){var n=e.map((function(e){return e[t].map((function(e){return e.label}))})),a=Object(b.a)(new Set(n.flat()));return void 0===a[0]?"*":a.join(", ")}return e.map((function(e){var a=M(e,t);return Object(l.a)(Object(l.a)({},e),{},{branches:n(a,"branches"),cities:n(a,"cities"),divisions:n(a,"divisions"),departments:n(a,"departments")})}))},U=function(e){return fetch(O+e,{method:"GET"}).then((function(e){return e.json()}))},G=function(e,t){return console.log("body",t),fetch(O+e,{method:"POST",body:t}).then((function(e){return e.json()}))},J=function(){return null!==V()&&"admin"===V().role},V=function(){return JSON.parse(sessionStorage.getItem("user"))},X=function(){return sessionStorage.removeItem("user")},W=n(122),K=n.n(W),Z=function(e){var t=e.title,n=e.data,r=e.columns,c=e.order,o=e.expandRow,i=e.classes,s=Object(d.a)(e,["title","data","columns","order","expandRow","classes"]),u=function(){return t?Object(a.jsx)("h5",{style:{borderRadius:"0.25em",textAlign:"center",border:"2px solid gray",margin:"2% 0",padding:"0.5em",marginTop:"1.5%"},children:t}):null};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(u,{}),Object(a.jsx)(K.a,Object(l.a)({keyField:"id",hover:!0,classes:i,data:n,columns:r,noDataIndication:function(){return Object(a.jsx)("i",{children:"Table is empty"})},defaultSorted:c,expandRow:o},s))]})},Y=n(240),Q=function(e,t){var n=t.employee;return n?Object(a.jsxs)(a.Fragment,{children:[n.first_name," ",n.last_name]}):Object(a.jsx)(a.Fragment,{children:"ME"})},$=function(e){if(!e)return"-";var t=e.Time;return e.Valid?t.substr(0,10).split("-").reverse().join("."):"-"},ee=function(e,t){return Object(a.jsx)(a.Fragment,{children:$(t.date)})},te=function(e,t){return Object(a.jsx)(a.Fragment,{children:$(t.deadline)})},ne=function(e,t){return Object(a.jsx)(a.Fragment,{children:$(t.release_date)})},ae=function(e,t){return Object(a.jsx)(a.Fragment,{children:$(t.s_date)})},re=function(e,t){return Object(a.jsx)(a.Fragment,{children:$(t.signatures[0].date)})},ce=function(e,t){return Object(a.jsx)(a.Fragment,{children:$(t.e_date)})},oe=function(e,t){return Math.round(100*t.complete)/100+"%"},ie=function(e,t){var n=t.link;return n&&"www"===n.substr(0,3)&&(n="https://"+n),Object(a.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",children:t.name})},se=function(e,t){var n=function(){return Object(a.jsxs)("h5",{children:[Object(a.jsx)(Y.a,{style:{color:"red",marginBottom:"6px"}})," ",ie(0,t)]})},r=t.deadline<Date.now()&&t.employees.find((function(e){return e.state.includes("e")||e.state.includes("s")}));return Object(a.jsx)(a.Fragment,{children:r?Object(a.jsx)(n,{}):ie(0,t)})},le=n(29),de=function(e,t,n,r){var c=r.setModalInfo,o=r.setShowModal,i=r.asSuperior;return Object(a.jsx)(le.a,{onClick:function(){S(t)&&w(t)||(o(!0),c(Object(l.a)(Object(l.a)({},t),{},{asSuperior:i})))},size:"sm",className:"btn-block",children:S(t)&&w(t)?"Details":"Sign"})},ue=function(e,t){return S(t)&&w(t)?Object(a.jsx)(le.a,{size:"sm",children:"Details"}):ce(0,t.signatures[0])},je=n(123),be=function(){return Object(a.jsx)(je.a,{animation:"border",className:"m-5"})},me=function(e){var t=e.e;return Object(a.jsx)("h6",{className:"p-5",children:t})},fe=function(e){var t=Object(r.useState)(),n=Object(i.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(),s=Object(i.a)(o,2),l=s[0],d=s[1],u=Object(r.useState)(!1),j=Object(i.a)(u,2),b=j[0],m=j[1];return Object(r.useEffect)((function(){console.log("url",e),fetch(O+e,{method:"GET"}).then((function(e){return e.json()})).then((function(e){m(!0),c(e)}),(function(e){m(!0),d(e)}))}),[]),[a,b,l]},Oe=n(27),he=function(e){var t=e.showModal,n=e.setShowModal,r=e.modalInfo,c=e.handleAccept;console.log(r);var o=function(){return n(!1)},i="";if(r.body)i=r.body;else if(r.asSuperior){i="Do you really want do sign for ".concat(null===r.employee?"ME":"".concat(r.employee.first_name," ").concat(r.employee.last_name))}else i="Do you really want do sign the document named ".concat(r.name);return Object(a.jsxs)(Oe.a,{show:t,onHide:o,centered:!0,children:[Object(a.jsx)(Oe.a.Header,{closeButton:!0,children:Object(a.jsx)(Oe.a.Title,{children:"Confirm"})}),Object(a.jsx)(Oe.a.Body,{children:Object(a.jsx)("p",{children:i})}),Object(a.jsxs)(Oe.a.Footer,{children:[Object(a.jsx)(le.a,{variant:"danger",onClick:function(){c(),o()},children:"Accept"}),Object(a.jsx)(le.a,{variant:"secondary",onClick:o,children:"Close"})]})]})},pe=function(){var e="/unsigned/signatures/".concat(V().id),t=fe(e),n=Object(i.a)(t,3),c=n[0],o=n[1],s=n[2],d=Object(r.useState)(!1),u=Object(i.a)(d,2),j=u[0],b=u[1],m=Object(r.useState)([]),f=Object(i.a)(m,2),h=f[0],p=f[1],x=Object(r.useState)([]),g=Object(i.a)(x,2),S=g[0],w=g[1],E=Object(r.useState)([]),C=Object(i.a)(E,2),_=C[0],D=C[1];if(Object(r.useEffect)((function(){c&&(D(c.documents),w(c.trainings))}),[c]),s)return Object(a.jsx)(me,{e:"Error: ".concat(s.message)});if(!o||!c)return Object(a.jsx)(be,{});var N=function(e,t){return fetch(O+e,{method:"POST",body:new URLSearchParams("id=".concat(t))})},R=function(e,t){var n=y(h);N("/sign/".concat(n),e).then((function(a){T(a)?"training"===n?P(e):t?z(e):L(e):console.log("error",a)}))},M=function(e){N("/sign/superior",e).then((function(t){T(t)&&z(e)}))},P=function(e){w(S.filter((function(t){return t.signatures[0].id!==e})))},L=function(e){D(_.filter((function(t){return t.signatures[0].id!==e})))},z=function(e){var t=_.map((function(t){return Object(l.a)(Object(l.a)({},t),{},{signatures:t.signatures.filter((function(t){return t.id!==e}))})}));D(t.filter((function(e){return e.signatures.length})))},A=function(e,t){return[{dataField:"name",text:"Name",sort:!0,headerStyle:{width:"33%"}},{dataField:"date.Time",text:"Date",sort:!0,formatter:ee,headerStyle:{width:"33%"}},{dataField:"deadline.Time",text:"Deadline",sort:!0,formatter:te,headerStyle:{width:"33%"}},Object(l.a)(Object(l.a)({},v()),{},{formatter:de,formatExtraData:{setModalInfo:e,setShowModal:t}})]}(p,b),I=function(e,t){return[{dataField:"name",text:"Name",sort:!0,formatter:ie,headerStyle:{width:"33%"}},{dataField:"release_date.Time",text:"Release",sort:!0,formatter:ne,headerStyle:{width:"33%"}},{dataField:"deadline.Time",text:"Deadline",sort:!0,formatter:te,headerStyle:{width:"33%"}},Object(l.a)(Object(l.a)({},v()),{},{formatter:de,formatExtraData:{setModalInfo:e,setShowModal:t,asSuperior:!1}})]}(p,b),B=function(e,t){return[{dataField:"employee.id",text:"Employee ID",sort:!0,headerStyle:{width:"33%"}},{dataField:"employee.last_name",text:"Full name",sort:!0,formatter:Q,headerStyle:{width:"33%"}},{dataField:"e_date.Time",text:"Sign Date",sort:!0,formatter:ce,headerStyle:{width:"33%"}},Object(l.a)(Object(l.a)({},v()),{},{formatter:de,formatExtraData:{setModalInfo:e,setShowModal:t,asSuperior:!0}})]}(p,b),q={onlyOneExpanding:!0,nonExpandable:k(_),renderer:function(e){return Object(a.jsx)(Z,{classes:"inner-table",data:e.signatures,columns:B,order:F("employee.last_name")})}};return console.log(c),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Z,{title:"Documents to sign",data:_,columns:I,order:F("deadline.Time"),expandRow:q}),Object(a.jsx)(Z,{title:"Trainings to sign",data:S,columns:A,order:F("deadline.Time")}),Object(a.jsx)(he,{showModal:j,setShowModal:b,modalInfo:h,handleAccept:function(){h.asSuperior?null===h.employee?R(h.id,"me"):M(h.id):R(h.signatures[0].id),b(!1)}})]})},xe=n(62),ge=n(248),ve=n(241),ye=n(124),Se=function(e){var t=e.notification;return t?Object(a.jsx)(ye.a,{variant:t.variant,children:t.body}):null},we={sk:{loginPage:{header:"Prihlasovanie",login:"Login",password:"Heslo",submit:"Prihl\xe1si\u0165 sa",notification:{wrongLogin:"Zl\xe9 prihlasovacie \xfadaje",wrongCard:"Nepodarilo sa prihl\xe1senie kartou"}},navigation:{login:"Prihlasit sa",recordsToSign:"Na podp\xedsanie",signedRecords:"Podp\xedsan\xe9",addRecord:"Prida\u0165",savedRecords:"Ulo\u017een\xe9",finder:"Vyh\u013ead\xe1vanie",settings:"Nastavenia",logout:"Odhl\xe1si\u0165 sa"}},en:{loginPage:{header:"Login",login:"Login",password:"Password",submit:"Login",notification:{wrongLogin:"Wrong login input",wrongCard:"Wrong card input"}},navigation:{login:"Login",recordsToSign:"To sign",signedRecords:"Signed",addRecord:"Add new",savedRecords:"Saved",finder:"Finder",settings:"Settings",logout:"Logout"}}},ke=function(e){var t=e.onSubmit,n=e.language,r=e.setLanguage,c=e.notification,o=Object(xe.a)(),i=o.register,s=o.handleSubmit,l=function(e){return n===e},d=we[n].loginPage,u=d.header,b=d.login,m=d.password,f=d.submit;return Object(a.jsx)(j.a,{className:"login-container",children:Object(a.jsxs)(ge.a,{onSubmit:s(t),children:[Object(a.jsx)("h3",{align:"center",children:u}),Object(a.jsxs)(ve.a,{onClick:function(e){return r(e.target.id)},className:"container-fluid p-0 mt-4 mb-5 btn-group",children:[Object(a.jsx)(le.a,{id:"sk",active:l("sk"),children:"Slovak"}),Object(a.jsx)(le.a,{id:"cz",active:l("cz"),disabled:!0,children:"Czech"}),Object(a.jsx)(le.a,{id:"en",active:l("en"),children:"English"}),Object(a.jsx)(le.a,{id:"hu",active:l("hu"),disabled:!0,children:"Hungary"})]}),Object(a.jsxs)(ge.a.Group,{children:[Object(a.jsx)(ge.a.Label,{children:b}),Object(a.jsx)(ge.a.Control,{name:"login",ref:i,required:!0})]}),Object(a.jsxs)(ge.a.Group,{children:[Object(a.jsx)(ge.a.Label,{children:m}),Object(a.jsx)(ge.a.Control,{name:"password",type:"password",ref:i,required:!0})]}),c&&Object(a.jsx)(Se,{notification:c}),Object(a.jsx)(le.a,{type:"submit",variant:"dark",className:"btn-block",children:f})]})})},Fe=(n(177),function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)("sk"),s=Object(i.a)(o,2),l=s[0],d=s[1],j=we[l].loginPage.notification,b=j.wrongLogin,m=j.wrongCard,f="",h=p();function p(){return setTimeout(x,40)}function x(){10===f.length&&y(f),f=""}clearTimeout(h);var g=function(e){var t=String.fromCharCode(e.keyCode).toLowerCase();(function(e){return function(e){return e.keyCode>=65&&e.keyCode<=90}(e)||function(e){return e.keyCode>=48&&e.keyCode<=57}(e)})(e)&&(f+=t,clearTimeout(h),h=p())};Object(r.useEffect)((function(){return document.addEventListener("keydown",g),function(){return document.removeEventListener("keydown",g)}}));var v=function(e){var t={id:e.id,role:e.role,first_name:e.first_name,last_name:e.last_name};sessionStorage.setItem("user",JSON.stringify(t)),window.location.reload(!1)},y=function(e){fetch(O+"/auth/kiosk",{method:"POST",body:new URLSearchParams("card=".concat(e))}).then((function(e){return e.json()})).then((function(e){v(e)})).catch((function(){return c(C(m))}))};return V()?Object(a.jsx)(u.a,{to:"/records-to-sign"}):Object(a.jsx)(ke,{onSubmit:function(e){var t=e.password;fetch(O+"/auth/login",{method:"POST",body:new URLSearchParams("login=".concat(e.login,"&password=").concat(t))}).then((function(e){return e.json()})).then((function(e){console.log("success"),v(e)})).catch((function(){return c(C(b))}))},language:l,setLanguage:d,notification:n})}),Ee=function(){return X(),Object(a.jsx)(u.a,{to:"/login"})},Ce=function(){var e="/signed/signatures/".concat(V().id),t=fe(e),n=Object(i.a)(t,3),r=n[0],c=n[1],o=n[2];if(o)return Object(a.jsx)(me,{e:"Error: ".concat(o.message)});if(!c||!r)return Object(a.jsx)(be,{});console.log("signed",r);var s=[{dataField:"name",text:"Name",sort:!0,formatter:ie,headerStyle:{width:"33%"}},{dataField:"release_date.Time",text:"Release",sort:!0,formatter:ne,headerStyle:{width:"33%"}},{dataField:"signatures[0].e_date.Time",text:"Signed date",sort:!0,formatter:ue,headerStyle:{width:"33%"}}],l=[{dataField:"employee.id",text:"ID",sort:!0,headerStyle:{width:"1%"}},{dataField:"employee.last_name",text:"Full name",sort:!0,formatter:Q},{dataField:"e_date.Time",text:"Employee Sign",sort:!0,formatter:ce},{dataField:"s_date.Time",text:"My Sign",sort:!0,formatter:ae}],d=[{dataField:"name",text:"Name",sort:!0,headerStyle:{width:"33%"}},{dataField:"date.Time",text:"Took place",sort:!0,formatter:ee,headerStyle:{width:"33%"}},{dataField:"signatures[0].date.Time",text:"Signed date",sort:!0,formatter:re,headerStyle:{width:"33%"}}],u={onlyOneExpanding:!0,nonExpandable:k(r.documents),renderer:function(e){return Object(a.jsx)(Z,{classes:"inner-table",data:e.signatures,columns:l,order:F("employee.last_name")})}};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Z,{title:"Signed Documents",data:r.documents,columns:s,expandRow:u,order:F("release_date.Time","desc")}),Object(a.jsx)(Z,{title:"Signed Trainings",data:r.trainings,columns:d,order:F("date.Time","desc")})]})},Te=n(242),_e=n(84),De=function(e){var t=e.label,n=e.name,r=e.placeholder,c=e.type,o=e.register,i=e.as,s=e.required;return Object(a.jsxs)(ge.a.Group,{as:Te.a,children:[Object(a.jsx)(ge.a.Label,{column:!0,sm:"3",children:t}),Object(a.jsx)(_e.a,{children:Object(a.jsx)(ge.a.Control,{name:n,placeholder:r,ref:o,type:c,as:i,required:s})})]})},Ne=n(244),Re=n(245),Me=n(246),Pe=n(17),Le=n(53),ze=function(e){var t=e.prefill,n=e.disabled,c=e.employees,o=e.combinations,i=e.combination,s=e.setCombination,d=e.notification;console.log(o);var u=Object(r.useContext)(Tt),j=D(u),b=function(e,t){var n=t.name;s(Object(l.a)(Object(l.a)({},i),{},Object(Pe.a)({},n,e)))},m=function(e,r){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j[e];return Object(a.jsxs)(a.Fragment,{children:[r,Object(a.jsx)(Le.a,{isMulti:!0,placeholder:"",name:e,options:c,defaultValue:t?t[e]:[],isDisabled:t&&"removedEmployees"!==e||n.includes(e),onChange:function(e,t){return b(e,t)}}),Object(a.jsx)("br",{})]})};return Object(a.jsxs)(_e.a,{className:"p-0",children:[m("branches","Branches"),m("divisions","Divisions"),m("departments","Departments"),m("cities","Cities"),c&&m("removedEmployees","Remove employees",c),d&&Object(a.jsx)(Se,{notification:d})]})},Ae=function(e){var t=e.prefill,n=e.combinations,c=e.setAssignedTo,o=e.setEmptyAssign,s=e.closeModal,d=Object(r.useContext)(Tt),u=Object(r.useState)([]),m=Object(i.a)(u,2),O=m[0],p=m[1],x=Object(r.useState)(),g=Object(i.a)(x,2),v=g[0],y=g[1],S=Object(r.useState)(),w=Object(i.a)(S,2),k=w[0],F=w[1],E=Object(r.useState)(t||{branches:[],divisions:[],departments:[],cities:[],removedEmployees:[]}),T=Object(i.a)(E,2),_=T[0],D=T[1];function N(){p(h);var e=I([_]);U("/employees/".concat(e)).then((function(e){e.length?R(e):y(C("not valid combination"))})).catch((function(e){y(C("not valid combination")),console.log("Errrrrrrrrrrror",e)}))}Object(r.useEffect)((function(){t&&N()}),[]);var R=function(e){F(e.map((function(e){return{value:e.id,label:q(e,d.departments)}})))};return Object(a.jsx)(Oe.a,{show:!0,onHide:s,centered:!0,children:Object(a.jsxs)(j.a,{className:"pt-3 pb-3 pl-5 pr-5",children:[Object(a.jsx)(Oe.a.Header,{closeButton:!0,children:Object(a.jsx)(Oe.a.Title,{children:"Add new combination"})}),Object(a.jsx)(Oe.a.Body,{children:Object(a.jsx)(ze,{prefill:t,disabled:O,employees:k,combinations:n,combination:_,setCombination:D,notification:v,setNotification:y})}),Object(a.jsx)(Oe.a.Footer,{children:Object(a.jsxs)(_e.a,{className:"text-center",children:[t?Object(a.jsx)(le.a,{onClick:function(){c((function(e){return e.map((function(e){return e.id===(null===t||void 0===t?void 0:t.id)?Object(l.a)(Object(l.a)({},_),{},{id:f()()}):e}))})),s()},size:"sm",className:"mr-2",children:"Save"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(le.a,{onClick:N,size:"sm",className:"mr-2",children:"Preview"}),Object(a.jsx)(le.a,{onClick:function(){var e=I([_]);U("/employees/".concat(e)).then((function(e){e.length?(y(void 0),o([!1]),c((function(e){return[].concat(Object(b.a)(e),[Object(l.a)(Object(l.a)({},_),{},{id:f()()})])})),s()):y(C("not valid combination"))})).catch((function(e){y(C("not valid combination")),console.log("Errrrrrrrrrrror",e)}))},size:"sm",className:"mr-2",children:"Add"})]}),Object(a.jsx)(le.a,{onClick:s,variant:"secondary",size:"sm",children:"close"})]})})]})})},Ie=n(247),Be=n(243),qe=function(e){var t=e.combinations,n=e.assignedTo,c=e.setAssignedTo,o=e.setEmptyAssign,s=Object(r.useState)(!1),d=Object(i.a)(s,2),u=d[0],j=d[1],b=Object(r.useState)(),m=Object(i.a)(b,2),f=m[0],O=m[1],h=function(){return j(!0)},p=function(){return Object(a.jsxs)(le.a,{variant:"dark",onClick:h,size:"sm",className:"mb-2",children:[Object(a.jsx)(Me.a,{size:"20",color:"white"}),Object(a.jsx)("span",{children:"add combination"})]})},x=function(e){return Object(a.jsx)(a.Fragment,{children:null===e||void 0===e?void 0:e.map((function(e){return e.label})).join(",")})},g=[{dataField:"branches",text:"Branches",formatter:function(e,t){return x(t.branches)}},{dataField:"divisions",text:"Divisions",formatter:function(e,t){return x(t.divisions)}},{dataField:"departments",text:"Departments",formatter:function(e,t){return x(t.departments)}},{dataField:"cities",text:"Cities",formatter:function(e,t){return x(t.cities)}},Object(l.a)(Object(l.a)({},v("edit")),{},{formatter:function(e,t){return Object(a.jsx)(Ie.a,{placement:"right",overlay:Object(a.jsx)(Be.a,{id:"tooltip-right",className:"text-left",children:t.removedEmployees&&t.removedEmployees.length?t.removedEmployees.map((function(e){return Object(a.jsx)("p",{children:e.label},e.value)})):Object(a.jsx)("p",{children:"Empty"})}),children:Object(a.jsx)(Ne.a,{size:"25",color:"black",onClick:function(){return function(e){O(e),h()}(t)}})})}}),Object(l.a)(Object(l.a)({},v("del")),{},{formatter:function(e,t){return Object(a.jsx)(Re.a,{size:"25",color:"red",onClick:function(){return function(e){c((function(t){return t.filter((function(t){return t.id!==e.id}))}))}(t)}})}})];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Z,{data:n,columns:g,wrapperClasses:"table-responsive",rowClasses:"text-nowrap"}),Object(a.jsx)(p,{}),u&&Object(a.jsx)(Ae,{prefill:f,combinations:t,setAssignedTo:c,setEmptyAssign:o,closeModal:function(){O(void 0),j(!1)}})]})},He=function(e){var t,n=e.setRecords,c=e.formData,o=(e.setFormData,e.actual),s=Object(r.useContext)(Tt),d=Object(r.useState)(!1),u=Object(i.a)(d,2),j=u[0],b=u[1],m=Object(r.useState)({}),f=Object(i.a)(m,2),h=f[0],g=f[1],v=Object(xe.a)({defaultValues:(t=c,t?Object(l.a)(Object(l.a)({},t),{},{release_date:A(t.release_date),deadline:A(t.deadline)}):{})}),y=v.register,S=v.handleSubmit,w=x,k=Object(r.useState)(),F=Object(i.a)(k,2),D=F[0],N=F[1],R=Object(r.useState)(c?c.type:""),P=Object(i.a)(R,2),L=P[0],B=P[1],q=Object(r.useState)(!1),H=Object(i.a)(q,2),U=H[0],G=H[1],J=Object(r.useState)(c?c.id:0),V=Object(i.a)(J,2),X=V[0],W=V[1],K=Object(r.useState)(),Z=Object(i.a)(K,2),Y=Z[0],Q=Z[1],$=Object(r.useState)([]),ee=Object(i.a)($,2),te=ee[0],ne=ee[1],ae=Object(r.useState)([]),re=Object(i.a)(ae,2),ce=re[0],oe=re[1],ie=Object(r.useState)([!0]),se=Object(i.a)(ie,2),de=se[0],ue=se[1];Object(r.useEffect)((function(){return Q(void 0)}),de),Object(r.useEffect)((function(){fetch(O+"/combinations",{method:"GET"}).then((function(e){return e.json()})).then((function(e){ne(function(e){return e.map((function(e){var t={};return p.forEach((function(n){t[n]={value:e["".concat(n,"_id")],label:e["".concat(n,"_name")]}})),t}))}(e))})).catch((function(e){return console.log(e)})),fetch(O+"/employees/all",{method:"GET"}).then((function(e){return e.json()})).then((function(e){oe(M(c,s,e))})).catch((function(e){return console.log(e)}))}),[]);var je=function(e){console.log("raw",ce),e=function(e,t){return Object(l.a)(Object(l.a)({},e),{},{release_date:z(e.release_date),deadline:z(e.deadline),assigned_to:I(t)})}(e||h,ce),console.log("data",e),"save"===D&&(X?(e=Object(l.a)(Object(l.a)({},e),{},{id:X}),be(e,"update"),Oe(e)):be(e,"create").then((function(e){return W(null===e||void 0===e?void 0:e.id)}))),"send"===D&&(X?(e=Object(l.a)(Object(l.a)({},e),{},{id:X}),o?me(e,"create/confirm").then((function(e){W(null===e||void 0===e?void 0:e.id)})):me(e,"update/confirm",!0)):me(e,"create/confirm").then((function(e){return W(null===e||void 0===e?void 0:e.id)})),G(!0))},be=function(e,t){return console.log(e),fetch(O+"/document/".concat(t),{method:"POST",body:JSON.stringify(e)}).then((function(e){return T(e)?Q(E("".concat(t," was successful"))):Q(C("".concat(t," failed"))),e.json()})).catch((function(e){return console.log("error",e)}))},me=function(e,t,a){return console.log(e),fetch(O+"/document/".concat(t),{method:"POST",body:JSON.stringify(e)}).then((function(r){return T(r)?(Q(E("".concat(t," was successful"))),n&&a&&fe(e),Oe(e)):Q(C("".concat(t," failed"))),console.log(r),r.json()})).catch((function(e){Q(C("".concat(t," failed"))),console.log("error",e)}))},fe=function(e){n((function(t){return t.filter((function(t){return t.id!==e.id}))}))},Oe=function(e){n&&n((function(t){var n=t;return n[t.findIndex((function(t){return t.id===e.id}))]=e,n}))};return Object(a.jsxs)(ge.a,{onChange:function(){return Q(void 0)},onSubmit:S((function(e){0!==ce.length?(g(e),"send"===D?b(!0):je(e)):Q(C("At least one combination is required"))})),children:[Object(a.jsxs)(ge.a.Group,{as:Te.a,children:[Object(a.jsx)(ge.a.Label,{column:!0,sm:"3",children:"Type*"}),Object(a.jsx)(_e.a,{children:Object(a.jsx)(ge.a.Control,{onChange:function(e){return B(e.target.value)},as:"select",name:"type",ref:y({validate:function(e){return""!==e}}),required:!0,value:L,children:_(w)})})]}),Object(a.jsxs)(ge.a.Group,{as:Te.a,children:[Object(a.jsx)(ge.a.Label,{column:!0,sm:"3",children:" "}),Object(a.jsx)(_e.a,{children:Object(a.jsx)(ge.a.Check,{inline:!0,label:"require superior",name:"require_superior",ref:y})})]}),Object(a.jsx)(De,{label:"Document name*",name:"name",placeholder:"Enter document name",register:y,required:!0}),Object(a.jsx)(De,{label:"Document number*",name:"order_number",type:"number",placeholder:"Enter number",register:y({valueAsNumber:!0}),required:!0}),Object(a.jsx)(De,{label:"Version*",name:"version",placeholder:"Enter version",register:y,required:!0}),Object(a.jsx)(De,{label:"Link to sharepoint",name:"link",placeholder:"Enter document link to sharepoint",register:y}),Object(a.jsx)(De,{label:"Release date*",name:"release_date",type:"date",register:y,required:!0}),Object(a.jsx)(De,{label:"Days to deadline*",name:"deadline",type:"date",register:y,required:!0}),Object(a.jsx)(De,{label:"Note",name:"note",as:"textarea",placeholder:"Enter note",register:y}),Object(a.jsx)("input",{hidden:!0,name:"complete",ref:y}),Object(a.jsx)(qe,{combinations:te,assignedTo:ce,setAssignedTo:oe,emptyAssign:de,setEmptyAssign:ue}),Y&&Object(a.jsx)(Se,{notification:Y}),Object(a.jsxs)("div",{className:"pt-1 btn-block text-right",children:[Object(a.jsx)(le.a,{variant:"outline-primary",type:"submit",className:"mr-1",disabled:U,onClick:function(){return N("save")},children:"Save"}),Object(a.jsx)(le.a,{type:"submit",onClick:function(){return N("send")},disabled:U,children:o?"Send as new version":"Send"})]}),j&&Object(a.jsx)(he,{handleAccept:je,showModal:j,setShowModal:b,modalInfo:{body:"Do you really want to send the record to the employees?"}})]})},Ue=n(128),Ge=(n(231),function(e){var t,n=e.setRecords,c=e.formData,o=e.setFormData,s=e.actual,d=Object(r.useContext)(Tt),u=Object(r.useState)(!1),j=Object(i.a)(u,2),b=j[0],m=j[1],f=Object(r.useState)({}),h=Object(i.a)(f,2),p=h[0],x=h[1],g=Object(xe.a)({defaultValues:(t=c,t?Object(l.a)(Object(l.a)({},t),{},{date:A(t.date),deadline:A(t.deadline)}):{})}),v=g.register,y=g.handleSubmit,S=Object(r.useState)(),w=Object(i.a)(S,2),k=w[0],F=w[1],_=Object(r.useState)(!1),D=Object(i.a)(_,2),N=D[0],R=D[1],M=Object(r.useState)(c?c.id:0),P=Object(i.a)(M,2),L=P[0],I=P[1],H=Object(r.useState)(),U=Object(i.a)(H,2),G=U[0],J=U[1],V=Object(r.useState)([]),X=Object(i.a)(V,2),W=X[0],K=X[1],Z=Object(r.useState)([]),Y=Object(i.a)(Z,2),Q=Y[0],$=Y[1],ee=Object(r.useState)([!0]),te=Object(i.a)(ee,2),ne=te[0],ae=te[1];Object(r.useEffect)((function(){return J(void 0)}),ne),Object(r.useEffect)((function(){fetch(O+"/employees/all",{method:"GET"}).then((function(e){return e.json()})).then((function(e){K(e),$(function(e,t){return t=B(t),e&&e.employees?e.employees.split(",").map((function(e){return t.find((function(t){return t.id==e}))})):[]}(c,e))})).catch((function(e){return console.log(e)}))}),[]);var re=function(e){e=function(e,t){return Object(l.a)(Object(l.a)({},e),{},{date:z(e.date),deadline:z(e.deadline),employees:t.map((function(e){return e.id})).join(",")})}(e||p,Q),"save"===k&&(L?(e=Object(l.a)(Object(l.a)({},e),{},{id:L}),ce(e,"update"),se(e)):ce(e,"create").then((function(e){return I(null===e||void 0===e?void 0:e.id)}))),"send"===k&&(L?(e=Object(l.a)(Object(l.a)({},e),{},{id:L}),s?oe(e,"create/confirm").then((function(e){return I(null===e||void 0===e?void 0:e.id)})):oe(e,"update/confirm")):oe(e,"create/confirm").then((function(e){return I(null===e||void 0===e?void 0:e.id)})),R(!0))},ce=function(e,t){return fetch(O+"/training/".concat(t),{method:"POST",body:JSON.stringify(e)}).then((function(e){return T(e)?J(E("".concat(t," was successful"))):J(C("".concat(t," failed"))),e.json()})).catch((function(e){return console.log("error",e)}))},oe=function(e,t){return console.log(e),fetch(O+"/training/".concat(t),{method:"POST",body:JSON.stringify(e)}).then((function(a){return T(a)?(J(E("".concat(t," was successful"))),n&&ie(e),o&&o(void 0)):J(C("".concat(t," failed"))),console.log(a),a.json()})).catch((function(e){return console.log("error",e)}))},ie=function(e){n((function(t){return t.filter((function(t){return t.id!==e.id}))}))},se=function(e){n&&n((function(t){var n=t;return n[t.findIndex((function(t){return t.id===e.id}))]=e,n}))};return Object(a.jsxs)(ge.a,{onChange:function(){return J(void 0)},onSubmit:y((function(e){console.log("data onSubmit",e),Q.length?(x(e),"send"===k?m(!0):re(e)):J(C("At least one employee is required"))})),children:[Object(a.jsx)(De,{label:"Training name*",name:"name",placeholder:"Enter document name",register:v,required:!0}),Object(a.jsx)(De,{label:"Name of lector",name:"lector",placeholder:"Enter document link to sharepoint",register:v}),Object(a.jsx)(De,{label:"Name of agency",name:"agency",placeholder:"Enter agency",register:v}),Object(a.jsx)(De,{label:"Place",name:"place",placeholder:"Enter place",register:v}),Object(a.jsx)(De,{label:"Date*",name:"date",type:"date",placeholder:"Enter date",register:v,required:!0}),Object(a.jsx)(De,{label:"Days to deadline*",name:"deadline",type:"date",defaultValue:"14",register:v,required:!0}),Object(a.jsx)(De,{label:"Duration",name:"duration",type:"number",placeholder:"Enter duration",register:v({valueAsNumber:!0})}),Object(a.jsx)(De,{label:"Agenda*",name:"agenda",as:"textarea",placeholder:"Enter agenda",register:v,required:!0}),Object(a.jsx)("input",{hidden:!0,name:"complete",ref:v}),Object(a.jsxs)(ge.a.Group,{as:Te.a,children:[Object(a.jsx)(ge.a.Label,{column:!0,sm:"3",children:"Add employees*"}),Object(a.jsx)(_e.a,{children:Object(a.jsx)(Ue.a,{id:"basic-typeahead-single",name:"employees",labelKey:function(e){return q(e,d.departments)},multiple:!0,placeholder:"Choose an employees...",selected:Q,options:W,onChange:function(e){$(e),ae([!1])}})})]}),G&&Object(a.jsx)(Se,{notification:G}),Object(a.jsxs)("div",{className:"pt-1 btn-block text-right",children:[Object(a.jsx)(le.a,{variant:"outline-primary",type:"submit",className:"mr-1",disabled:N,onClick:function(){return F("save")},children:"Save"}),Object(a.jsx)(le.a,{type:"submit",onClick:function(){return F("send")},disabled:N,children:"Send"})]}),b&&Object(a.jsx)(he,{handleAccept:re,showModal:b,setShowModal:m,modalInfo:{body:"Do you really want to send the record to the employees?"}})]})}),Je=function(){var e=Object(r.useState)("document"),t=Object(i.a)(e,2),n=t[0],c=t[1],o=function(e){return n===e&&"active"};return Object(a.jsxs)(j.a,{className:"w-75",children:[Object(a.jsxs)(ve.a,{onClick:function(e){return c(e.target.id)},className:"btn-group btn-header",children:[Object(a.jsx)(le.a,{id:"document",className:o("document"),children:"Document"}),Object(a.jsx)(le.a,{id:"training",className:o("training"),children:"Online training"})]}),"document"===n&&Object(a.jsx)(He,{}),"training"===n&&Object(a.jsx)(Ge,{})]})},Ve=function(e,t,n,r){var c=r.setFormData;return Object(a.jsx)(le.a,{variant:"outline-primary",onClick:function(){return c(t)},size:"sm",children:"Edit"})},Xe=function(e,t,n,r){var c=r.setRow,o=r.setShowModal;return Object(a.jsx)(le.a,{id:"save",size:"sm",onClick:function(){c(t),o(!0)},children:"Send"})},We=function(e){var t=e.setRecords,n=e.formData,r=e.setFormData,c=e.actual,o=y(n),i={setRecords:t,formData:n,setFormData:r,actual:c};return Object(a.jsxs)(Oe.a,{show:!0,onHide:function(){return r(void 0)},centered:!0,size:"lg",children:[Object(a.jsx)(Oe.a.Header,{closeButton:!0,children:Object(a.jsxs)(Oe.a.Title,{children:["Edit ",o]})}),Object(a.jsx)(Oe.a.Body,{children:"document"===o?Object(a.jsx)(He,Object(l.a)({},i)):Object(a.jsx)(Ge,Object(l.a)({},i))})]})},Ke=function(){var e=fe("/document/edited"),t=Object(i.a)(e,3),n=t[0],c=t[1],o=t[2],s=fe("/training/edited"),d=Object(i.a)(s,3),u=d[0],j=d[1],b=d[2],m=Object(r.useState)([]),f=Object(i.a)(m,2),h=f[0],p=f[1],x=Object(r.useState)([]),g=Object(i.a)(x,2),S=g[0],w=g[1],k=Object(r.useState)(),_=Object(i.a)(k,2),D=_[0],N=_[1],R=Object(r.useState)(),M=Object(i.a)(R,2),P=M[0],L=M[1],z=Object(r.useState)(!1),A=Object(i.a)(z,2),I=A[0],B=A[1],q=Object(r.useState)(),H=Object(i.a)(q,2),U=H[0],G=H[1];Object(r.useEffect)((function(){n&&u&&(p(n),w(u))}),[n,u]);var J=function(){"document"===y(U)?p((function(e){return e.filter((function(e){return e.id!==U.id}))})):w((function(e){return e.filter((function(e){return e.id!==U.id}))}))};if(o)return Object(a.jsx)(me,{e:"Error: ".concat(o.message)});if(b)return Object(a.jsx)(me,{e:"Error: ".concat(b.message)});if(!c||!n||!j||!u)return Object(a.jsx)(be,{});var V=function(e,t,n){return[{dataField:"name",text:"Name",sort:!0,headerStyle:{width:"33%"}},{dataField:"date.Time",text:"Release",sort:!0,formatter:ee,headerStyle:{width:"32%"}},{dataField:"place",text:"Place",sort:!0,headerStyle:{width:"33%"}},Object(l.a)(Object(l.a)({},v("EditBtn")),{},{formatter:Ve,formatExtraData:{setFormData:e}}),Object(l.a)(Object(l.a)({},v("SendBtn")),{},{formatter:Xe,formatExtraData:{setRow:t,setShowModal:n}})]}(L,G,B),X=function(e,t,n){return[{dataField:"name",text:"Name",sort:!0,headerStyle:{width:"33%"}},{dataField:"release_date.Time",text:"Release",sort:!0,formatter:ne,headerStyle:{width:"32%"}},{dataField:"deadline.Time",text:"Deadline",sort:!0,formatter:te,headerStyle:{width:"33%"}},Object(l.a)(Object(l.a)({},v("EditBtn")),{},{formatter:Ve,formatExtraData:{setFormData:e}}),Object(l.a)(Object(l.a)({},v("SendBtn")),{},{formatter:Xe,formatExtraData:{setRow:t,setShowModal:n}})]}(L,G,B);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Z,{title:"Saved documents",data:h,columns:X,order:F("deadline.Time")}),Object(a.jsx)(Z,{title:"Saved trainings",data:S,columns:V,order:F("deadline.Time")}),D&&Object(a.jsx)(Se,{notification:D}),P&&Object(a.jsx)(We,{setRecords:"document"===y(P)?p:w,formData:P,setFormData:L}),I&&Object(a.jsx)(he,{handleAccept:function(){fetch(O+"/".concat(y(U),"/confirm/").concat(U.id),{method:"GET"}).then((function(e){T(e)?(J(),N(E("Record ".concat(U.name," was successfully sent")))):N(C("Record ".concat(U.name," failed")))})).catch((function(e){return console.log(e)}))},showModal:I,setShowModal:B,modalInfo:{body:"Do you really want to send the record to the employees?"}})]})},Ze=function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(),s=Object(i.a)(o,2),l=s[0],d=s[1],u=Object(r.useState)(),j=Object(i.a)(u,2),b=j[0],m=j[1],f=Object(r.useState)(),h=Object(i.a)(f,2),p=h[0],x=h[1],g=Object(r.useState)(),v=Object(i.a)(g,2),y=v[0],S=v[1],w=function(){x(void 0),S(void 0)};return Object(a.jsxs)("div",{children:[Object(a.jsx)("script",{crossOrigin:"true"}),Object(a.jsx)("p",{className:"pt-5",children:Object(a.jsx)("strong",{children:"IMPORT EMPLOYEES"})}),Object(a.jsxs)(ge.a,{children:[Object(a.jsx)("select",{onChange:function(e){return c(e.target.value)},name:"type",required:!0,value:n,children:_(["GEFCO SLOVAKIA","GEFCO Forwarding Slovakia","VCM","Leasing"])}),Object(a.jsx)("span",{children:" Choose import"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"file",required:!0,onChange:function(e){return m(e.target.files[0])}}),Object(a.jsx)(le.a,{type:"button",onClick:function(){w();var e=new FormData,t="employees_upload_".concat(Date.now());n?(e.append("file",b),e.append("name",t),e.append("import",n),b?fetch(O+"/file/upload",{method:"POST",body:e}).then((function(e){if(console.log("rrr",e),T(e))return e.json();throw new Error("Import was unsuccessful")})).then((function(e){e.IsWarning?S({variant:"warning",body:e.Msg}):S(E("Successfully uploaded."))})).catch((function(e){return S(C("Error "+e))})):S(C("File is not set"))):S(C("Select type"))},children:"Upload"}),y&&Object(a.jsx)(Se,{notification:y})]}),Object(a.jsx)("hr",{}),Object(a.jsx)("p",{className:"pt-5",children:Object(a.jsx)("strong",{children:"IMPORT CARDS"})}),Object(a.jsxs)(ge.a,{children:[Object(a.jsx)("p",{style:{marginBottom:"4px"},children:"Upload file with employee card information"}),Object(a.jsx)("input",{type:"file",id:"cardsFile",onChange:function(e){return d(e.target.files[0])}}),Object(a.jsx)(le.a,{type:"button",onClick:function(){w();var e=new FormData,t="kiosk_upload_".concat(Date.now());e.append("file",l),e.append("name",t),console.log(l),l?fetch(O+"/file/upload",{method:"POST",body:e}).then((function(e){console.log(e),T(e)?x(E("Successfully uploaded.")):x(C("Import was unsuccessful"))})).catch((function(e){return x(C("Error submitting form! "+e))})):x(C("File is not set"))},children:"Upload"}),p&&Object(a.jsx)(Se,{notification:p})]}),Object(a.jsx)("hr",{})]})},Ye={branches:[],cities:[],departments:[],divisions:[]},Qe={employee:"",lector:""},$e={width:"22%",marginLeft:"5px"},et={backgroundColor:"#f3c404f2",color:"black"},tt={backgroundColor:"#343a40"},nt=function(e){var t=e.employees,n=e.showSM,c=e.setShowSM,o=e.setSMData,s=e.setDocuments,d=e.getAllRecords,u=Object(r.useContext)(Tt),j=Object(r.useState)(Qe),b=Object(i.a)(j,2),m=b[0],f=b[1],h=D(u),p=Object(r.useState)(Ye),x=Object(i.a)(p,2),g=x[0],v=x[1],y=Object(r.useState)("structure"),S=Object(i.a)(y,2),w=S[0],k=S[1],F=Object(r.useState)(!1),E=Object(i.a)(F,2),C=E[0],T=E[1],_=function(e,t){T(!0),k(e);var a=n;t&&(a=!n,c((function(e){return!e}))),a?L(e):R(e)},R=function(e){console.log("searching for TABLE",e),"person"===e?M():P()},M=function(){if(m.employee){var e=m.employee.value;U("/document/manager/".concat(e)).then((function(e){console.log("tableByPerson",e),s(H(e,u))})).catch((function(e){s([])}))}else d()},P=function(){var e=N(g);G("/document/filter",JSON.stringify(e)).then((function(e){console.log("tableByCombination",e),s(H(e,u))}))},L=function(e){console.log("searching for MATRIX",e),"person"===e?z():A()},z=function(){fetch(O+"/skill/matrix",{method:"POST",body:new URLSearchParams("superior_id=".concat(m.employee.value))}).then((function(e){return e.json()})).then((function(e){console.log("matrixByPerson",e),o(e)}))},A=function(){var e=N(g);fetch(O+"/skill/matrix",{method:"POST",body:new URLSearchParams("filter=".concat(JSON.stringify(e)))}).then((function(e){return e.json()})).then((function(e){console.log("matrixByCombination",e),o(e)}))},I=function(e){var t=C&&w===e?et:tt;return Object(l.a)({border:"none",width:"10%"},t)},B=function(e){return Object(a.jsx)("div",{style:$e,children:Object(a.jsx)(Le.a,{isClearable:!0,isMulti:!0,value:g[e],name:e,placeholder:"Select ".concat(e),options:h[e],onChange:function(e,t){return function(e,t){var n=t.name;T(!1),v(Object(l.a)(Object(l.a)({},g),{},Object(Pe.a)({},n,e)))}(e,t)}})})};return Object(a.jsxs)(ge.a,{style:{marginLeft:"16px"},children:[Object(a.jsxs)(Te.a,{className:"pb-2",children:[Object(a.jsx)(le.a,{style:I("person"),onClick:function(){return _("person")},children:n?"Search manager":"Search employee"}),Object(a.jsx)("div",{style:$e,children:Object(a.jsx)(Le.a,{isClearable:!0,value:m.employee,name:"employee",placeholder:"Select employee",options:t,onChange:function(e,t){return function(e,t){var n=t.name;T(!1),f(Object(l.a)(Object(l.a)({},m),{},Object(Pe.a)({},n,e)))}(e,t)}})}),Object(a.jsx)(_e.a,{className:"text-right pr-0",children:Object(a.jsx)(le.a,{className:"mr-3",variant:"primary",onClick:function(){return _(w,!0)},children:"Show ".concat(n?"table":"skill matrix")})})]}),Object(a.jsxs)(Te.a,{children:[Object(a.jsx)(le.a,{style:I("structure"),onClick:function(){return _("structure")},children:"Search combination"}),B("branches"),B("divisions"),B("departments"),B("cities")]})]})},at=function(e,t,n,r){r.id;var c,o=r.data,i=r.setData,s=r.i,d=o[n],u=null===(c=d.employees[s])||void 0===c?void 0:c.state;void 0===u&&(u="_");var j=u.includes("X");function m(){return u.includes("X")?1===u.length&&"X"!==u?u:u.substr(1):u}j&&(u=m());var f={backgroundColor:function(e){switch(e){case"-":return"gray";case"_":return"cornflowerblue";case"es":return"tomato";case"e":return"orange";case"s":return"gold";default:return"green"}}(u),color:"s"===u?"black":"white",borderColor:j?"black":"white",borderWidth:"5px"};return Object(a.jsx)(le.a,{style:f,onClick:function(){var e=j?m():"X"+u,t=Object(b.a)(d.employees);t[s]=Object(l.a)(Object(l.a)({},t[s]),{},{state:e});var a=Object(b.a)(o);a[n]=Object(l.a)(Object(l.a)({},d),{},{employees:t}),i(a)},className:"btn-block",children:function(){var e;return null===(e=[{state:"-",label:"no need"},{state:"es",label:"miss e+s"},{state:"e",label:"miss e"},{state:"s",label:"miss s"},{state:"",label:"well done"},{state:"X",label:"bug"},{state:"_",label:"not send"}].find((function(e){return e.state===u})))||void 0===e?void 0:e.label}()})},rt=n(251),ct=function(e){var t=e.data,n=e.setAction,r=e.setModalInfo,c=e.setShowModal,o=e.handleAccept,i=e.showLegend,s=e.setShowLegend,l=function(e){var t=e.target.id;n(t),"cancel"===t?o():(r({body:"Do you really want to ".concat(t," selected signatures?")}),c(!0))},d=0===t.length;return Object(a.jsxs)(Te.a,{className:"mb-3",children:[Object(a.jsx)(_e.a,{className:"text-left",children:Object(a.jsx)(ve.a,{className:"div-btn",size:"sm",children:Object(a.jsx)(le.a,{onClick:function(){return s(!i)},children:i?"Hide legend":"Show legend"})})}),Object(a.jsx)(_e.a,{className:"text-right",children:Object(a.jsxs)(ve.a,{className:"div-btn",onClick:l,size:"sm",children:[Object(a.jsx)(le.a,{id:"sign",size:"sm",disabled:d,children:"Sign"}),Object(a.jsx)(le.a,{id:"cancelDuty",size:"sm",disabled:d,children:"Cancel duty"}),Object(a.jsx)(le.a,{id:"trainAgain",size:"sm",disabled:d,children:"Train again"}),Object(a.jsx)(le.a,{id:"cancel",size:"sm",onClick:l,disabled:d,children:"Cancel"})]})})]})},ot=function(){var e=function(e){var t=e.color,n=e.textColor,r=void 0===n?"white":n,c=e.label,o=e.text,i={background:t,borderColor:t,color:r,width:"80px",height:"20px",fontSize:".7rem",fontWeight:"bold",padding:"0"};return Object(a.jsx)("p",{children:Object(a.jsxs)("span",{children:[Object(a.jsx)(le.a,{style:i,children:c})," ".concat(o)]})})};return Object(a.jsx)(rt.a,{style:{width:"30rem",marginTop:"1rem",fontSize:".7rem",marginBottom:".75rem"},children:Object(a.jsxs)(rt.a.Body,{children:[Object(a.jsx)(rt.a.Subtitle,{className:"mb-3 text-muted",children:"Legend:"}),Object(a.jsxs)(rt.a.Text,{children:[Object(a.jsx)(e,{label:"no need",text:"Zamestnanec bol odzna\u010den\xfd z potreby obozn\xe1menia",color:"gray"}),Object(a.jsx)(e,{label:"miss e+s",text:"Ani zamestnanec ani nadriaden\xfd e\u0161te nepotvrdili",color:"tomato"}),Object(a.jsx)(e,{label:"miss e",text:"Zamestnanec nepotvrdil",color:"orange"}),Object(a.jsx)(e,{label:"miss s",text:"Nadriaden\xfd nepotvrdil",color:"gold",textColor:"white"}),Object(a.jsx)(e,{label:"well done",text:"Dokument je potvrden\xfd",color:"green"}),Object(a.jsx)(e,{label:"not sent",text:"Este neodoslane",color:"cornflowerblue"}),Object(a.jsxs)("p",{children:[Object(a.jsx)(Y.a,{style:{color:"red",marginBottom:"4px"}})," ","Uplynul deadline a ch\xfdbaj\xfa podpisy"]}),Object(a.jsxs)("p",{children:["hviezdi\u010dka ",Object(a.jsx)("strong",{children:"*"})," znamena, ze zamestnanec sa opakovane pre\u0161koluje"]})]})]})})},it=function(e){var t=e.SMData,n=Object(r.useState)([]),c=Object(i.a)(n,2),o=c[0],s=c[1],d=Object(r.useState)([]),u=Object(i.a)(d,2),j=u[0],b=u[1];Object(r.useEffect)((function(){if(t.documents){var e=t.documents[0];if(e&&e.signatures){var n=B(t.employees);b(n);var a=[],r=[];t.documents.forEach((function(e,t){n.forEach((function(t,n){var a=e.signatures.find((function(e){return e.employee_id===t.id}));r.push(a||{employee:{id:t.id},sign:{id:null}})})),a.push(Object(l.a)(Object(l.a)({},e),{},{signatures:r})),e.signatures=r,r=[]})),s(t.documents.map((function(e){return{id:e.id,name:e.name,require_superior:e.require_superior,deadline:e.deadline.Time,employees:e.signatures.map((function(t){return{id:t.employee.id,sign_id:null===t||void 0===t?void 0:t.id,state:R(t,e.require_superior)}})),link:e.link}})))}else s([])}}),[t,t.documents]);var m=Object(r.useState)(!1),f=Object(i.a)(m,2),h=f[0],p=f[1],x=Object(r.useState)(!1),g=Object(i.a)(x,2),y=g[0],S=g[1],w=Object(r.useState)({}),k=Object(i.a)(w,2),F=k[0],E=k[1],C=Object(r.useState)(""),T=Object(i.a)(C,2),_=T[0],D=T[1],N=function(){var e=[{dataField:"name",text:"",formatter:se,headerStyle:{width:"1%"}}],t=0;return j.forEach((function(n){var a="".concat(n.first_name," ").concat(n.last_name,", ").concat(n.job_title);e.push(Object(l.a)(Object(l.a)({},v(n.id,a)),{},{formatter:at,formatExtraData:{id:n.id,data:o,setData:s,i:t++%j.length}}))})),e}();function M(e){return"s"===e?"":"e"}var P=function(){var e=o.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{employees:e.employees.map((function(t){return function(e,t){if(!function(e){return e.state.includes("X")}(t))return t;console.log("e",t);var n=t.state.replace("X","");return"sign"===_?"-"===n||"e"===n||""===n?Object(l.a)(Object(l.a)({},t),{},{state:n}):(fetch(O+"/sign/superior",{method:"POST",body:new URLSearchParams("id=".concat(t.sign_id))}),Object(l.a)(Object(l.a)({},t),{},{state:M(n)})):"cancelDuty"===_?"-"===n?Object(l.a)(Object(l.a)({},t),{},{state:n}):(fetch(O+"/cancels",{method:"POST",body:new URLSearchParams(t.sign_id.toString())}),Object(l.a)(Object(l.a)({},t),{},{state:"-"})):"trainAgain"===_?e&&"es"===n?Object(l.a)(Object(l.a)({},t),{},{state:n}):e||n?(fetch(O+"/resigns",{method:"POST",body:new URLSearchParams(t.sign_id.toString())}),n=function(e){return e?"es":"s"}(e),Object(l.a)(Object(l.a)({},t),{},{state:n})):Object(l.a)(Object(l.a)({},t),{},{state:"e"}):void 0}(e.require_superior,t)}))})}));s(e)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Z,{title:"SkillMatrix",classes:"skill-matrix-table",data:o,columns:N,wrapperClasses:"table-responsive",rowClasses:"text-nowrap"}),Object(a.jsx)(ct,{data:o,setAction:D,setModalInfo:E,setShowModal:S,handleAccept:P,handleExport:function(){},showLegend:h,setShowLegend:p}),h&&Object(a.jsx)(ot,{}),Object(a.jsx)(he,{showModal:y,setShowModal:S,modalInfo:F,handleAccept:P})]})},st=function(e,t,n,r){var c=r.setReport;return Object(a.jsx)(le.a,{onClick:function(){return c(t.id)},size:"sm",children:"Report"})},lt=n(88),dt=function(e){var t=e.id,n=e.closeModal,c=Object(r.useState)([]),o=Object(i.a)(c,2),s=o[0],l=o[1],d=Object(r.useState)(),u=Object(i.a)(d,2),j=u[0],m=u[1],f=Object(r.useState)([]),O=Object(i.a)(f,2),h=O[0],p=O[1],x=Object(r.useState)(!1),v=Object(i.a)(x,2),y=v[0],S=v[1],w=Object(r.useState)([]),k=Object(i.a)(w,2),E=k[0],C=k[1],T=Object(r.useRef)(),_=Object(lt.useReactToPrint)({content:function(){return T.current}});Object(r.useEffect)((function(){U("/document/report/".concat(t)).then((function(e){console.log("report data",e);var n=e.find((function(e){return e.id==t}));if(D(n),e.length>1){var a=e.sort((function(e,t){return e.id-t.id}));l(a)}}))}),[]);var D=function(e){if(m(e),S(e.require_superior),C([{label:"N\xe1zov dokumentu:",value:e.name}]),e.require_superior){var t=[];e.signatures.forEach((function(e){0!==e.superior_id&&t.push(e.superior_id)})),t="[".concat(t.join(","),"]"),G("/employees/ids",JSON.stringify({ids:t})).then((function(e){console.log("res",e),C((function(t){return[].concat(Object(b.a)(t),[{label:"\u0160kolite\u013e:",value:e.map((function(e){return e.first_name+" "+e.last_name})).join(", ")}])}))}))}var n=e.signatures.map((function(e){var t=e.employee;return{id:e.employee_id,name:"".concat(t.first_name," ").concat(t.last_name),e_date:$(e.e_date),s_date:$(e.s_date)}}));p(n)},N="Prezen\u010dn\xe1 listina",R=[{dataField:"name",text:"Full name",sort:!0},{dataField:"e_date",text:"Sign Date",sort:!0}];y&&R.push({dataField:"s_date",text:"Superior",sort:!0});var M=function(e){var t=e.rep,n="".concat(t.name,", version: ").concat(t.version,", date: ").concat($(t.release_date));return Object(a.jsx)("p",{style:{marginBottom:"4px",marginRight:"24px"},children:t.id===(null===j||void 0===j?void 0:j.id)?Object(a.jsx)("span",{children:n}):Object(a.jsx)(le.a,{variant:"link",onClick:function(){return D(t)},style:{padding:"0"},children:n})})};return Object(a.jsxs)(Oe.a,{show:!0,onHide:n,centered:!0,size:"lg",children:[Object(a.jsx)(Oe.a.Header,{closeButton:!0,children:Object(a.jsxs)(Oe.a.Title,{children:[Object(a.jsx)("span",{children:N}),Object(a.jsx)(le.a,{size:"sm",variant:"dark",style:{position:"absolute",right:"3.5rem"},onClick:_,children:"Print this out!"})]})}),Object(a.jsx)(Oe.a.Body,{children:Object(a.jsxs)("div",{id:"print-page content",ref:T,children:[Object(a.jsx)("div",{className:"no-print",style:{marginBottom:"1rem"},children:s.map((function(e){return Object(a.jsx)(M,{rep:e})}))}),Object(a.jsxs)("div",{className:"print header",style:{position:"relative",marginBottom:"5rem",marginTop:"2rem",display:"none"},children:[Object(a.jsx)("img",{src:"/images/logo-header.png",style:{position:"absolute",left:"0"}}),Object(a.jsx)("h2",{style:{textAlign:"center"},children:N})]}),Object(a.jsx)(Z,{data:E,columns:[{dataField:"label",text:""},{dataField:"value",text:""}],defaultSorted:F("name"),headerClasses:"d-none",classes:"report mb-2"}),Object(a.jsx)(Z,{data:h,columns:R,defaultSorted:F("name"),wrapperClasses:"table-responsive",rowClasses:"text-nowrap"}),Object(a.jsx)("p",{id:"pageFooter",className:"print footer",style:{display:"none",position:"absolute",bottom:"0"},children:g()}),Object(a.jsx)("div",{style:{display:"none",position:"absolute",bottom:"0",right:"0"},className:"page-number print"})]})})]})},ut=function(e){var t=e.found,n=e.setFound,c=Object(r.useState)(),o=Object(i.a)(c,2),s=o[0],d=o[1],u=Object(r.useState)(),j=Object(i.a)(u,2),b=j[0],m=j[1],f=[{dataField:"name",text:"Name",sort:!0},{dataField:"release_date.Time",text:"Release",formatter:ne,sort:!0},{dataField:"type",text:"Type",sort:!0},{dataField:"branches",text:"Branches",sort:!0},{dataField:"divisions",text:"Divisions",sort:!0},{dataField:"departments",text:"Departments",sort:!0},{dataField:"cities",text:"Cities",sort:!0},{dataField:"complete",text:"State",formatter:oe,sort:!0,headerStyle:{width:"1%"}},Object(l.a)(Object(l.a)({},v("EditBtn")),{},{formatter:Ve,formatExtraData:{setFormData:d}}),Object(l.a)(Object(l.a)({},v("ReportBtn")),{},{formatter:st,formatExtraData:{setReport:m}})];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Z,{title:"Found documents",data:t,columns:f,defaultSorted:F("name"),wrapperClasses:"table-responsive",rowClasses:"text-nowrap"}),s&&Object(a.jsx)(We,{setRecords:n,formData:s,setFormData:d,actual:!0}),b&&Object(a.jsx)(dt,{id:b,closeModal:function(){return m(void 0)}})]})},jt=function(e){var t=e.id,n=e.closeModal,c=Object(r.useContext)(Tt),o=Object(r.useState)([]),s=Object(i.a)(o,2),l=s[0],d=s[1],u=Object(r.useState)([]),j=Object(i.a)(u,2),b=j[0],m=j[1],f=Object(r.useRef)(),O=Object(lt.useReactToPrint)({content:function(){return f.current}});Object(r.useEffect)((function(){U("/training/report/".concat(t)).then((function(e){d([{label:"N\xe1zov \u0161kolenia:",value:e.name},{label:"D\xe1tum a miesto konania \u0161kolenia:",value:$(e.date)+" "+e.place},{label:"N\xe1zov vzdel\xe1vacej agent\xfary:",value:e.agency},{label:"Meno a priezvisko \u0161kolite\u013ea:",value:e.lector}]),m(e.signatures.map((function(e){var t,n=e.employee;return{id:n.id,name:"".concat(n.first_name," ").concat(n.last_name),date:$(e.date),department:null===(t=c.departments.find((function(e){return e.id===n.department_id})))||void 0===t?void 0:t.name}})))}))}),[]);return Object(a.jsxs)(Oe.a,{show:!0,onHide:n,centered:!0,size:"lg",children:[Object(a.jsx)(Oe.a.Header,{closeButton:!0,children:Object(a.jsxs)(Oe.a.Title,{children:[Object(a.jsx)("span",{children:"Prezen\u010dn\xe1 listina"}),Object(a.jsx)(le.a,{size:"sm",variant:"dark",style:{position:"absolute",right:"3.5rem"},onClick:O,children:"Print this out!"})]})}),Object(a.jsx)(Oe.a.Body,{children:Object(a.jsx)("div",{id:"print-page content",ref:f,children:Object(a.jsxs)("div",{children:[Object(a.jsx)(Z,{data:l,columns:[{dataField:"label",text:""},{dataField:"value",text:""}],defaultSorted:F("name"),headerClasses:"d-none",classes:"report"}),Object(a.jsx)("br",{}),Object(a.jsx)(Z,{data:b,columns:[{dataField:"name",text:"Full name",sort:!0},{dataField:"department",text:"Department",sort:!0},{dataField:"date",text:"Sign Date",sort:!0}],defaultSorted:F("name"),wrapperClasses:"table-responsive",rowClasses:"text-nowrap"})]})})})]})},bt=function(e){var t=e.found,n=e.setFound,c=Object(r.useState)(),o=Object(i.a)(c,2),s=o[0],d=o[1],u=Object(r.useState)(),j=Object(i.a)(u,2),b=j[0],m=j[1],f=[{dataField:"name",text:"Name",sort:!0},{dataField:"date.Time",text:"Release",formatter:ee,sort:!0},{dataField:"lector",text:"Lector",sort:!0},{dataField:"agency",text:"Agency",sort:!0},{dataField:"place",text:"Place",sort:!0},{dataField:"complete",text:"State",formatter:oe,sort:!0,headerStyle:{width:"1%"}},Object(l.a)(Object(l.a)({},v("EditBtn")),{},{formatter:Ve,formatExtraData:{setFormData:d}}),Object(l.a)(Object(l.a)({},v("ReportBtn")),{},{formatter:st,formatExtraData:{setReport:m}})];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Z,{title:"Found trainings",data:t,columns:f,defaultSorted:F("name"),wrapperClasses:"table-responsive",rowClasses:"text-nowrap"}),s&&Object(a.jsx)(We,{setRecords:n,formData:s,setFormData:d,actual:!0}),b&&Object(a.jsx)(jt,{id:b,closeModal:function(){return m(void 0)}})]})},mt={width:"20%",marginLeft:"4px"},ft={backgroundColor:"#f3c404f2",color:"black"},Ot={backgroundColor:"#343a40"},ht=function(e){var t=e.employees,n=e.setTrainings,c=e.getAllRecords,o=Object(r.useState)([]),s=Object(i.a)(o,2),d=s[0],u=s[1],j=Object(r.useState)({employee:"",lector:""}),b=Object(i.a)(j,2),m=b[0],f=b[1],O=Object(r.useState)(!1),h=Object(i.a)(O,2),p=h[0],x=h[1];Object(r.useEffect)((function(){U("/lectors/all").then((function(e){u(e.map((function(e){return console.log("lector",e),{value:e,label:e}})))}))}),[]);var g=function(e,t,n){return Object(a.jsx)("div",{style:mt,children:Object(a.jsx)(Le.a,{isClearable:!0,value:n,name:e,placeholder:"Select ".concat(e),options:t,onChange:function(e,t){return function(e,t){var n=t.name;x(!1),f(Object(l.a)(Object(l.a)({},m),{},Object(Pe.a)({},n,e)))}(e,t)}})})};return Object(a.jsx)(ge.a,{style:{marginTop:"3rem",marginLeft:"14px"},children:Object(a.jsxs)(Te.a,{children:[Object(a.jsx)(le.a,{style:function(){var e=p?ft:Ot;return Object(l.a)({border:"none",width:"10%"},e)}(),onClick:function(){var e,t,a,r;x(!0),m.employee||m.lector?(console.log("post","".concat(JSON.stringify({employee:""+(null===(e=m.employee)||void 0===e?void 0:e.value)||"",lector:(null===(t=m.lector)||void 0===t?void 0:t.value)||""}))),G("/training/filter","".concat(JSON.stringify({employee:""+(null===(a=m.employee)||void 0===a?void 0:a.value)||"",lector:(null===(r=m.lector)||void 0===r?void 0:r.value)||""}))).then((function(e){console.log("found trainings",e),n(e)}))):c()},children:"Search trainings"}),g("employee",t,m.employee),g("lector",d,m.lector)]})})},pt=function(){var e=Object(r.useContext)(Tt),t=Object(r.useState)([]),n=Object(i.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)(),l=Object(i.a)(s,2),d=l[0],u=l[1],j=Object(r.useState)([]),b=Object(i.a)(j,2),m=b[0],f=b[1],O=Object(r.useState)([]),h=Object(i.a)(O,2),p=h[0],x=h[1],g=Object(r.useState)([]),v=Object(i.a)(g,2),y=v[0],S=v[1];Object(r.useEffect)((function(){w()}),[]),Object(r.useEffect)((function(){U("/employees/all").then((function(t){o(function(e,t){return t?B(e).map((function(e){return{value:e.id,label:q(e,t)}})):[]}(t,e.departments))}))}),[e]);var w=function(){U("/document/actual").then((function(t){x(H(t,e))})),U("/training/all").then((function(e){S(e)}))};return Object(a.jsxs)("div",{style:{marginTop:"1%"},className:"finder",children:[Object(a.jsx)(nt,{employees:c,showSM:d,setShowSM:u,setSMData:f,setDocuments:x,getAllRecords:w}),d?Object(a.jsx)(it,{SMData:m}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ut,{found:p,setFound:x}),Object(a.jsx)(ht,{employees:c,setTrainings:S,getAllRecords:w}),Object(a.jsx)(bt,{found:y,setFound:S})]})]})},xt=function(){var e=Object(u.g)().pathname;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{className:"pt-5",children:"Error 404: Page not found"}),Object(a.jsxs)("h5",{className:"pt-3",children:["Not match for ",Object(a.jsx)("code",{children:e})]})]})},gt=function(){var e=V(),t=J(),n=function(t){var n=t.component,r=Object(d.a)(t,["component"]);return e?Object(a.jsx)(u.b,Object(l.a)(Object(l.a)({},r),{},{component:n})):Object(a.jsx)(u.a,{to:"/login"})};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.a,{children:Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{exact:!0,path:"/",render:function(){return V()?Object(a.jsx)(u.a,{to:"/records-to-sign",component:pe}):Object(a.jsx)(u.a,{to:"/login",component:Fe})}}),Object(a.jsx)(u.b,{path:"/login",component:Fe}),Object(a.jsx)(u.b,{path:"/logout",component:Ee}),Object(a.jsx)(n,{path:"/records-to-sign",component:pe}),Object(a.jsx)(n,{path:"/signed-records",component:Ce}),t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(n,{path:"/add-record",component:Je}),Object(a.jsx)(n,{path:"/saved-record",component:Ke}),Object(a.jsx)(n,{path:"/settings",component:Ze})]}),Object(a.jsx)(u.b,{path:"*",component:xt})]})}),Object(a.jsx)("div",{className:"large-container",children:t&&Object(a.jsx)(n,{path:"/finder",component:pt})})]})},vt=n(129),yt=n(249),St=n(250),wt=n.p+"static/media/logo.923adaad.png",kt=function(){var e=V(),t=J(),n="sk"===JSON.parse(sessionStorage.getItem("language"))?we.sk:we.en;n=n.navigation;var r=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(vt.a,{href:"/records-to-sign",children:n.recordsToSign}),Object(a.jsx)(vt.a,{href:"/signed-records",children:n.signedRecords}),t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(vt.a,{href:"/add-record",children:n.addRecord}),Object(a.jsx)(vt.a,{href:"/saved-record",children:n.savedRecords}),Object(a.jsx)(vt.a,{href:"/finder",children:n.finder}),Object(a.jsx)(vt.a,{href:"/settings",children:n.settings})]}),Object(a.jsx)(vt.a,{href:"/logout",children:n.logout})]})},c=function(){return Object(a.jsx)(vt.a,{href:"/login",children:n.login})},o=function(){var t=e?"".concat(e.first_name," ").concat(e.last_name):"";return Object(a.jsx)("span",{style:{color:"white"},children:t})};return Object(a.jsxs)(yt.a,{expand:"md",bg:"dark",variant:"dark",sticky:"top",className:"navigation",children:[Object(a.jsx)(yt.a.Brand,{href:"/",children:Object(a.jsx)("img",{alt:"logo",src:wt,width:"50",height:"50",className:"d-inline-block align-top"})}),Object(a.jsx)(o,{}),Object(a.jsx)(yt.a.Toggle,{}),Object(a.jsx)(yt.a.Collapse,{id:"responsive-navbar-nav",children:Object(a.jsx)(St.a,{className:"ml-auto",variant:"pills",activeKey:Object(u.g)().pathname,children:e?Object(a.jsx)(r,{}):Object(a.jsx)(c,{})})})]})},Ft=n(35),Et=n(36),Ct=function(){function e(t){var n=t.timeout,a=t.onTimeout;Object(Ft.a)(this,e),this.timeout=n,this.onTimeout=a,this.eventHandler=this.updateExpiredTime.bind(this),this.tracker(),this.startInterval()}return Object(Et.a)(e,[{key:"startInterval",value:function(){var e=this;this.updateExpiredTime(),this.interval=setInterval((function(){parseInt(localStorage.getItem("_expiredTime"),10)<Date.now()&&e.onTimeout&&(e.onTimeout(),e.cleanUp())}),1e3)}},{key:"updateExpiredTime",value:function(){var e=this;this.timeoutTracker&&clearTimeout(this.timeoutTracker),this.timeoutTracker=setTimeout((function(){localStorage.setItem("_expiredTime",Date.now()+1e3*e.timeout)}),300)}},{key:"tracker",value:function(){window.addEventListener("mousemove",this.eventHandler),window.addEventListener("scroll",this.eventHandler),window.addEventListener("keydown",this.eventHandler)}},{key:"cleanUp",value:function(){localStorage.removeItem("_expiredTime"),clearInterval(this.interval),window.removeEventListener("mousemove",this.eventHandler),window.removeEventListener("scroll",this.eventHandler),window.removeEventListener("keydown",this.eventHandler)}}]),e}(),Tt=Object(r.createContext)(void 0);var _t=function(){var e=Object(r.useState)({branches:[],divisions:[],cities:[],departments:[]}),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e={};h.forEach((function(t){U("/".concat(t)).then((function(n){return e[t]=n}))})),c(e)}),[]),Object(r.useEffect)((function(){var e=new Ct({timeout:6e3,onTimeout:function(){var e;V()&&(X(),e="/login",window.location.replace(e))}});return function(){return e.cleanUp()}}),[]),Object(a.jsxs)(s.a,{children:[Object(a.jsx)(kt,{}),Object(a.jsx)(Tt.Provider,{value:n,children:Object(a.jsx)(gt,{})})]})};n(232),n(233);o.a.render(Object(a.jsx)(_t,{}),document.getElementById("root"))}},[[234,1,2]]]);
//# sourceMappingURL=main.4dd0608d.chunk.js.map